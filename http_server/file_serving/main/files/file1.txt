     ESP_LOGE(TAG, "Failed to stat %s : %s", entrytype, entry->d_name);		
            continue;		
        }		
        sprintf(entrysize, "%ld", entry_stat.st_size);		
        ESP_LOGI(TAG, "Found %s : %s (%s bytes)", entrytype, entry->d_name, entrysize);		
        /* Send chunk of HTML file containing table entries with file name and size */		
        httpd_resp_sendstr_chunk(req, "<tr><td><a href=\"");		
        httpd_resp_sendstr_chunk(req, req->uri);		
        httpd_resp_sendstr_chunk(req, entry->d_name);		
        if (entry->d_type == DT_DIR) {		
            httpd_resp_sendstr_chunk(req, "/");		
        }		
        httpd_resp_sendstr_chunk(req, "\">");		
        httpd_resp_sendstr_chunk(req, entry->d_name);		
        httpd_resp_sendstr_chunk(req, "</a></td><td>");		
        httpd_resp_sendstr_chunk(req, entrytype);		
        httpd_resp_sendstr_chunk(req, "</td><td>");		
        httpd_resp_sendstr_chunk(req, entrysize);		
        httpd_resp_sendstr_chunk(req, "</td><td>");		
        httpd_resp_sendstr_chunk(req, "<form method=\"post\" action=\"/delete");		
        httpd_resp_sendstr_chunk(req, req->uri);		
        httpd_resp_sendstr_chunk(req, entry->d_name);		
        httpd_resp_sendstr_chunk(req, "\"><button type=\"submit\">Delete</button></form>");		
        httpd_resp_sendstr_chunk(req, "</td></tr>\n");		
    }		
    closedir(dir);		
    /* Finish the file list table */		
    httpd_resp_sendstr_chunk(req, "</tbody></table>");		
    /* Send remaining chunk of HTML file to complete it */		
    httpd_resp_sendstr_chunk(req, "</body></html>");		
    /* Send empty chunk to signal HTTP response completion */		
    httpd_resp_sendstr_chunk(req, NULL);		
return ESP_OK;		
}		
#define IS_FILE_EXT(filename, ext) \		
    (strcasecmp(&filename[strlen(filename) - sizeof(ext) + 1], ext) == 0)		
/* Set HTTP response content type according to file extension */		
static esp_err_t set_content_type_from_file(httpd_req_t *req, const char *filename)		
{		
    if (IS_FILE_EXT(filename, ".pdf")) {		
        return httpd_resp_set_type(req, "application/pdf");		
    } else if (IS_FILE_EXT(filename, ".html")) {		
        return httpd_resp_set_type(req, "text/html");		
    } else if (IS_FILE_EXT(filename, ".jpeg")) {		
        return httpd_resp_set_type(req, "image/jpeg");		
    } else if (IS_FILE_EXT(filename, ".ico")) {		
        return httpd_resp_set_type(req, "image/x-icon");		
    }		
